var tinyshop={name:"tinyshop javascript library",version:"1.13",instanceid:1e5,messagecode:1e5,csp:["Access-Control-Allow-Origin","*"],xhr:function(){var e=null,t=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"];try{e=new XMLHttpRequest}catch(a){for(var s=0;s<t.length;s++)try{e=new ActiveXObject(t[s])}catch(e){continue}}return e},message:function(e){window.alert(this.htmlspecialchars(e,"full")+"\n"+"-".repeat(32)+"\n#TS-MSGC-"+this.messagecode),this.messagecode<this.math("maxint")&&this.messagecode++},htmlspecialchars:function(e,t="full",s="utf-8"){switch(t){case"full":f=["<",">","!","$","%","'","(",")","*","+",":","=","`","{","}","[","]"],r=["&#60;","&#62;","&#34;","&#36;","&#37;","&#39;","&#40;","&#41;","&#42;","&#43;","&#58;","&#61;","&#96;","&#123;","&#125;","&#91;","&#93;"];break;case"uri":f=["<",">","'"],r=["&#60;","&#62;","&#39;"]}for(var a=0;a<f.length;a++)e=String(e).replace(f[a],r[a]);return e},duplicatearray:function(e,t){return e.length=0,e.push.apply(e,t),e},redirect:function(e){document.location=e?this.htmlspecialchars(e,"uri"):this.htmlspecialchars(location.href,"uri")},math:function(e,t=1,s=1){switch(e){case"int":if(s>1)for(;s>0;)this.math("int",t,s),this.result=parseInt(t),s--;else this.result=parseInt(t);break;case"float":this.result=parseFloat(t);break;case"fixed":this.result=t.toFixed(s);break;case"rand":this.result=Math.random(1,Number.MAX_SAFE_INTEGER);break;case"maxint":this.result=Number.MAX_SAFE_INTEGER;break;case"uuid":this.result=Math.random().toString(16).slice(2,10)}return this.result},rnd:function(e="rand",t=null,s=null,a=null){switch(e){case"rand":this.r=Math.random(1,Number.MAX_SAFE_INTEGER);break;case"uuid":this.r=Math.random().toString(16).slice(2,14);break;case"bytes":this.r=Math.random()}return this.r},toggle:function(e,t){for(i=0;i<t;i++)try{this.dom("toggle"+e,"display","none"),this.dom("cat"+e,"fontWeight","100")}catch(e){}this.dom("toggle"+e,"display","block"),this.dom("cat"+e,"fontWeight","bold")},dom:function(e,t,s=""){try{if(s&&null!=s||"null"!=s)switch(t){case"get":return document.getElementById(escape(e)).value;case"set":document.getElementById(escape(e)).value=this.htmlspecialchars(s,"full");break;case"html":document.getElementById(escape(e)).innerHTML=this.htmlspecialchars(s,"full");break;case"gethtml":document.getElementById(escape(e)).innerHTML;break;case"display":document.getElementById(escape(e)).style.display=this.htmlspecialchars(s,"full");break;case"fontWeight":case"className":document.getElementById(escape(e)).style.fontWeight=this.htmlspecialchars(s,"full")}else this.message("DOM constructor could not populate the requested action.")}catch(e){this.message(this.htmlspecialchars(e,"full"))}return!0},returner:function(e){return window.alert(this.htmlspecialchars(e,"full")),this.htmlspecialchars(e,"full")},json:function(e){tinyshop.fetchJSON(e,function(e){return JSON.parse(e)})},caller:function(e,t=[],s){if(!s)switch(e){case"shipping":s="inventory/shipping.json";break;case"inventory":s="inventory/shop.json";break;case"settings":s="inventory/site.json";break;case"currencies":s="inventory/currencies.json";break;case"pages":s="inventory/pages.json";break;case"articles":s="inventory/articles.json";break;case"blog":s="inventory/blog.json";break;case"messages":s="inventory/messages.json";break;case"conf":s="inventory/shop.conf.json";break;case"cart":s="inventory/cart.json";break;case"customer":s="inventory/customer.json";break;case"orders":s="inventory/orders.json"}var a=e,i=tinyshop.xhr();i.onreadystatechange=function(){if(4==i.readyState)switch(a){case"inventory":tinyshop.getinventory(this.responseText);break;case"settings":tinyshop.getsettings(this.responseText);break;case"shipping":tinyshop.getshipping(this.responseText,t);break;case"currencies":tinyshop.getcurrencies(this.responseText,t);break;case"pages":tinyshop.getpages(this.responseText,t);break;case"articles":tinyshop.getarticles(this.responseText,t);break;case"blog":tinyshop.getblog(this.responseText,t);break;case"messages":tinyshop.getmessages(this.responseText,t);break;case"conf":tinyshop.getconf(this.responseText,t);break;case"cart":tinyshop.getcart(this.responseText,t);break;case"customer":tinyshop.getcustomer(this.responseText,t);break;case"orders":tinyshop.getorders(this.responseText,t)}},i.open("GET",s+"?cache-control="+this.instanceid,!0),i.withCredentials=!0,i.setRequestHeader("Access-Control-Allow-Origin","*"),i.setRequestHeader("Content-Type","application/json;charset=UTF-8"),i.send()},fetchJSON:function(e,t){var s=tinyshop.xhr();s.open("GET",e,!0),s.withCredentials=!0,s.setRequestHeader("Access-Control-Allow-Origin","*"),s.setRequestHeader("Content-Type","application/json;charset=UTF-8"),s.onreadystatechange=function(){4==s.readyState&&200==s.status&&t(s.responseText)},s.send(null)},fetchHTML:function(e,t,s){var a=this.xhr();a.open("GET",e,!0),a.withCredentials=!0,a.setRequestHeader("Access-Control-Allow-Origin","*"),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.onreadystatechange=function(){4==a.readyState&&200==a.status&&(this.res=a.responseText,tinyshop.dom(t,"html",this.res))},a.send(null)},addtocart:function(e){this.id=this.math("int",e,1),this.fetchHTML("/shop/cart/addtocart/"+this.instanceid+"/"+this.id+"/","GET","result")},calculateTotalPayPal:function(e){var t=this.dom("item_price","get"),s=this.dom("shipping","get"),a=this.dom("handling","get"),i=(this.dom("total_amount","get"),this.math("int",this.math("int",s)+this.math("int",a))),n=this.math("int",t*e),r=this.math("int",this.math("int",i)+this.math("int",n));return this.dom("total_amount","set",r),!0},getsettings:function(e){var t,s=[];t=JSON.parse(e);for(var a=0;a<t.length;a++)for(var i in t[a])-1===s.indexOf(i)&&s.push(i);for(a=0;a<t.length;a++)for(var n=0;n<s.length;n++)""==t[a][s[n]]||null==t[a][s[n]]||(document.write(s[n]+":"),document.write(t[a][s[n]]),document.write("<br>"))},getinventory:function(e){var t,s=[];t=JSON.parse(e);for(var a=0;a<t.length;a++)for(var i in t[a])-1===s.indexOf(i)&&s.push(i);for(a=0;a<t.length;a++)for(var n=0;n<s.length;n++)""==t[a][s[n]]||null==t[a][s[n]]||(document.write(s[n]+":"),document.write(t[a][s[n]]),document.write("<br>"))},getshipping:function(e,t){if(t[2]){var s,a=[],i=(this.htmlspecialchars(t[0],"full"),t[1]),n=this.htmlspecialchars(t[2],"full"),r=this.htmlspecialchars(t[3],"full"),o="shipping."+this.htmlspecialchars(n,"full");s=JSON.parse(e);for(var h=0;h<s.length;h++)for(var c in s[h])-1===a.indexOf(c)&&a.push(c);for(h=0;h<s.length;h++)for(var l=0;l<a.length;l++)if(a[l]==o){var u=s[h][a[l]],p=this.math("float",i)+this.math("float",u);this.dom(r,"html","&euro;"+this.math("float",p,2))}}else this.message("Shipping country is not set, cannot calculate shipping cost.")},wishlist:function(e,t,s){var a=this.xhr();a.open("GET","/wishlist/"+this.rnd()+"/"+e+"/"+this.htmlspecialchars(t,"full")+"&tr="+this.htmlspecialchars(s,"uri"),!0),a.onreadystatechange=function(){if(4==a.readyState&&200==a.status){var e=a.responseText.split("|");return"O"==e[0].replace(" ","")?("0"!=s?(tinyshop.dom("fhs"+t,"html",e[1]),tinyshop.dom("favheart"+t,"className","heartfull_png")):(tinyshop.dom("fhs"+t,"html",e[1]),tinyshop.dom("favheart"+t,"className","favheart_fixed")),!1):"X"==e[0].replace(" ","")&&("0"!=s?(tinyshop.dom("fhs"+t,"html",e[1]),tinyshop.dom("favheart"+t,"className","heart_png")):(tinyshop.dom("fhs"+t,"html",e[1]),tinyshop.dom("favheart"+t,"className","favheart")),!1)}},a.send(null)},redeemVoucher:function(){var e=this.dom("voucher","get");if(""==e)this.message("Please enter voucher code. This code is a sequence of numbers and letters.");else{var t=this.xhr();t.open("GET","/query/"+this.rnd()+"/voucher/"+this.htmlspecialchars(e)+"/",!0),t.onreadystatechange=function(){if(4==t.readyState&&200==t.status)if(t.responseText){var e=t.responseText.split("|");if("OK"==e[0].replace(" ","")){var s=this.dom("total","gethtml");s=s.replace("&euro;","").replace(/\u20ac/g,"").replace(",",".").replace(" ","");var a=this.math("float",s);if(""!=e[1])var i=e[1],n=a-this.math("float",i);else if(""!=e[2]&&"|"!=e[2])n=a-a/100*e[2];a<0?this.message("The amount is too tow to redeem the voucher."):"NaN"==n.toFixed(2)?this.dom("total","html","&euro;"+n):this.dom("total","html","&euro;"+n.toFixed(2))}else"ERR"==e[0].replace(" ","")?this.message("Code has already been redeemed, or is wrong."):this.message("There was a problem with redeeming the voucher code. Please check if the code is correct.")}else this.message("There was a problem with redeeming. Please check if the code is correct.")},t.send(null)}}};tinyshop.instanceid=tinyshop.rnd("uuid");
