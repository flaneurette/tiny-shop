var tinyshop={name:"tinyshop javascript library",version:"1.0",instanceid:1000011,messagecode:1e5,csp:["Access-Control-Allow-Origin","*"],xhr:function(){var e=null,t=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"];try{e=new XMLHttpRequest}catch(n){for(var s=0;s<t.length;s++)try{e=new ActiveXObject(t[s])}catch(e){continue}}return e},message:function(e){this.message(escape(e)+"\n"+"-".repeat(32)+"\n#TS-MSGC-"+this.messagecode),this.messagecode<Number.MAX_SAFE_INTEGER&&this.messagecode++},redirect:function(e){document.location=e?escape(e):location.href},math:function(e,t,s=1){switch(e){case"int":if(s>1)for(;s>0;)this.math("int",t,s),this.result=parseInt(t),s--;else this.result=parseInt(t);break;case"float":this.result=parseFloat(t);break;case"fixed":this.result=t.toFixed(s);break;case"rand":this.result=Math.random()}return null},rnd:function(e="rand",t=null,s=null,n=null){switch(e){case"rand":case"bytes":this.r=Math.random()}return this.r},toggle:function(e,t){for(i=0;i<t;i++)try{this.dom("toggle"+e,"display","none"),this.dom("cat"+e,"fontWeight","100")}catch(e){}this.dom("toggle"+e,"display","block"),this.dom("cat"+e,"fontWeight","bold")},dom:function(e,t,s=""){switch(t){case"get":return document.getElementById(escape(e)).value;case"set":document.getElementById(escape(e)).value=s;break;case"html":document.getElementById(escape(e)).innerHTML=s;break;case"gethtml":document.getElementById(escape(e)).innerHTML;break;case"display":document.getElementById(escape(e)).style.display=s;break;case"fontWeight":case"className":document.getElementById(escape(e)).style.fontWeight=s}return!0},returner:function(e){return window.alert(e),e},json:function(e){tinyshop.fetchJSON(e,function(e){return JSON.parse(e)})},caller:function(e,t){var s=t,n=tinyshop.xhr();n.onreadystatechange=function(){if(4==n.readyState)switch(s){case"inventory":tinyshop.getinventory(this.responseText);break;case"settings":tinyshop.getsettings(this.responseText);break;case"shipping":tinyshop.getshipping(this.responseText)}},n.open("GET",e,!0),n.send()},fetchJSON:function(e,t){var s=tinyshop.xhr();s.open("GET",e,!0),s.withCredentials=!0,s.setRequestHeader("Access-Control-Allow-Origin","*"),s.onreadystatechange=function(){4==s.readyState&&200==s.status&&t(s.responseText)},s.send(null)},fetchHTML:function(e,t,s){var n=this.xhr();n.open("GET",e+"&rnd="+this.rnd(),!0),n.withCredentials=!0,n.setRequestHeader("Access-Control-Allow-Origin","*"),n.onreadystatechange=function(){4==n.readyState&&200==n.status&&(this.res=n.responseText,tinyshop.dom(t,"html",this.res))},n.send(null)},addtocart:function(e){this.id=this.math("int",e,1),this.fetchHTML("/cart/"+this.rnd()+"/addtocart/"+this.id+"/","GET","result")},calculateTotalPayPal:function(e){var t=this.dom("item_price","get"),s=this.dom("shipping","get"),n=this.dom("handling","get"),a=(this.dom("total_amount","get"),this.math("int",this.math("int",s)+this.math("int",n))),i=this.math("int",t*e),r=this.math("int",this.math("int",a)+this.math("int",i));return this.dom("total_amount","set",r),!0},getshipping:function(e){var t,s=[];t=JSON.parse(e);for(var n=0;n<t.length;n++)for(var a in t[n])-1===s.indexOf(a)&&s.push(a);for(n=0;n<t.length;n++)for(var i=0;i<s.length;i++)""==t[n][s[i]]||null==t[n][s[i]]||(document.write(s[i]+":"),document.write(t[n][s[i]]),document.write("<br>"))},getsettings:function(e){var t,s=[];t=JSON.parse(e);for(var n=0;n<t.length;n++)for(var a in t[n])-1===s.indexOf(a)&&s.push(a);for(n=0;n<t.length;n++)for(var i=0;i<s.length;i++)""==t[n][s[i]]||null==t[n][s[i]]||(document.write(s[i]+":"),document.write(t[n][s[i]]),document.write("<br>"))},getinventory:function(e){var t,s=[];t=JSON.parse(e);for(var n=0;n<t.length;n++)for(var a in t[n])-1===s.indexOf(a)&&s.push(a);for(n=0;n<t.length;n++)for(var i=0;i<s.length;i++)""==t[n][s[i]]||null==t[n][s[i]]||(document.write(s[i]+":"),document.write(t[n][s[i]]),document.write("<br>"))},calculatetotal:function(e,t,s){tinyshop.caller("inventory/site.json","settings"),tinyshop.caller("inventory/shipping.json","shipping")},wishlist:function(e,t,s){var n=this.xhr();n.open("GET","/wishlist/"+this.rnd()+"/"+e+"/"+escape(t)+"&tr="+s,!0),n.onreadystatechange=function(){if(4==n.readyState&&200==n.status){var e=n.responseText.split("|");return"O"==e[0].replace(" ","")?("0"!=s?(tinyshop.dom("fhs"+t,"html",e[1]),tinyshop.dom("favheart"+t,"className","heartfull_png")):(tinyshop.dom("fhs"+t,"html",e[1]),tinyshop.dom("favheart"+t,"className","favheart_fixed")),!1):"X"==e[0].replace(" ","")&&("0"!=s?(tinyshop.dom("fhs"+t,"html",e[1]),tinyshop.dom("favheart"+t,"className","heart_png")):(tinyshop.dom("fhs"+t,"html",e[1]),tinyshop.dom("favheart"+t,"className","favheart")),!1)}},n.send(null)},redeemVoucher:function(){var e=this.dom("voucher","get");if(""==e)this.message("Please enter voucher code. This code is a sequence of numbers and letters.");else{var t=this.xhr();t.open("GET","/query/"+this.rnd()+"/voucher/"+escape(e)+"/",!0),t.onreadystatechange=function(){if(4==t.readyState&&200==t.status)if(t.responseText){var e=t.responseText.split("|");if("OK"==e[0].replace(" ","")){var s=this.dom("total","gethtml");s=s.replace("&euro;","").replace(/\u20ac/g,"").replace(",",".").replace(" ","");var n=this.math("float",s);if(""!=e[1])var a=e[1],i=n-this.math("float",a);else if(""!=e[2]&&"|"!=e[2])i=n-n/100*e[2];n<0?this.message("The amount is too tow to redeem the voucher."):"NaN"==i.toFixed(2)?this.dom("total","html","&euro;"+i):this.dom("total","html","&euro;"+i.toFixed(2))}else"ERR"==e[0].replace(" ","")?this.message("Code has already been redeemed, or is wrong."):this.message("There was a problem with redeeming the voucher code. Please check if the code is correct.")}else this.message("There was a problem with redeeming. Please check if the code is correct.")},t.send(null)}}};
